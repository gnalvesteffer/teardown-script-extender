#include "LuaFunctions.h"
#include "Menu.h"

#include <Windows.h>

void LuaFunctions::registerVKeys(lua_State* L)
{
	lua_pushstring(L, "VK_SEPARATOR");
	lua_pushnumber(L, 108);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_R");
	lua_pushnumber(L, 82);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_B");
	lua_pushnumber(L, 66);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_L");
	lua_pushnumber(L, 76);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_RIGHT");
	lua_pushnumber(L, 39);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F8");
	lua_pushnumber(L, 119);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_W");
	lua_pushnumber(L, 87);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_Q");
	lua_pushnumber(L, 81);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_SUBTRACT");
	lua_pushnumber(L, 109);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_3");
	lua_pushnumber(L, 51);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_PRINT");
	lua_pushnumber(L, 42);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F9");
	lua_pushnumber(L, 120);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_6");
	lua_pushnumber(L, 54);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F10");
	lua_pushnumber(L, 121);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_Y");
	lua_pushnumber(L, 89);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_EXECUTE");
	lua_pushnumber(L, 43);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_RBUTTON");
	lua_pushnumber(L, 2);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_V");
	lua_pushnumber(L, 86);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_ESCAPE");
	lua_pushnumber(L, 27);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_CLEAR");
	lua_pushnumber(L, 12);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_LSHIFT");
	lua_pushnumber(L, 160);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_A");
	lua_pushnumber(L, 65);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_0");
	lua_pushnumber(L, 48);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F12");
	lua_pushnumber(L, 123);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_N");
	lua_pushnumber(L, 78);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_PRIOR");
	lua_pushnumber(L, 33);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_I");
	lua_pushnumber(L, 73);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_END");
	lua_pushnumber(L, 35);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_9");
	lua_pushnumber(L, 57);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_MENU");
	lua_pushnumber(L, 18);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_S");
	lua_pushnumber(L, 83);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_O");
	lua_pushnumber(L, 79);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_2");
	lua_pushnumber(L, 50);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_DELETE");
	lua_pushnumber(L, 46);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_5");
	lua_pushnumber(L, 53);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_LWIN");
	lua_pushnumber(L, 91);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_MBUTTON");
	lua_pushnumber(L, 4);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_NUMPAD9");
	lua_pushnumber(L, 105);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F3");
	lua_pushnumber(L, 114);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_7");
	lua_pushnumber(L, 55);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_D");
	lua_pushnumber(L, 68);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_CONTROL");
	lua_pushnumber(L, 17);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_H");
	lua_pushnumber(L, 72);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_C");
	lua_pushnumber(L, 67);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_8");
	lua_pushnumber(L, 56);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_RSHIFT");
	lua_pushnumber(L, 161);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_E");
	lua_pushnumber(L, 69);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_DIVIDE");
	lua_pushnumber(L, 111);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_NUMPAD5");
	lua_pushnumber(L, 101);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_SCROLL");
	lua_pushnumber(L, 145);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_X");
	lua_pushnumber(L, 88);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_4");
	lua_pushnumber(L, 52);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_J");
	lua_pushnumber(L, 74);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_NEXT");
	lua_pushnumber(L, 34);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_HOME");
	lua_pushnumber(L, 36);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_ADD");
	lua_pushnumber(L, 107);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_LBUTTON");
	lua_pushnumber(L, 1);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_M");
	lua_pushnumber(L, 77);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_LCONTROL");
	lua_pushnumber(L, 162);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_LMENU");
	lua_pushnumber(L, 164);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_DOWN");
	lua_pushnumber(L, 40);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_NUMPAD7");
	lua_pushnumber(L, 103);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F6");
	lua_pushnumber(L, 117);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F5");
	lua_pushnumber(L, 116);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_K");
	lua_pushnumber(L, 75);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F4");
	lua_pushnumber(L, 115);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F2");
	lua_pushnumber(L, 113);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_SELECT");
	lua_pushnumber(L, 41);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_SHIFT");
	lua_pushnumber(L, 16);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F11");
	lua_pushnumber(L, 122);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_NUMPAD1");
	lua_pushnumber(L, 97);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_CAPITAL");
	lua_pushnumber(L, 20);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_NUMPAD2");
	lua_pushnumber(L, 98);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F7");
	lua_pushnumber(L, 118);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F1");
	lua_pushnumber(L, 112);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_SPACE");
	lua_pushnumber(L, 32);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_NUMLOCK");
	lua_pushnumber(L, 144);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_NUMPAD4");
	lua_pushnumber(L, 100);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_NUMPAD0");
	lua_pushnumber(L, 96);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_NUMPAD8");
	lua_pushnumber(L, 104);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_DECIMAL");
	lua_pushnumber(L, 110);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_NUMPAD3");
	lua_pushnumber(L, 99);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_UP");
	lua_pushnumber(L, 38);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_APPS");
	lua_pushnumber(L, 93);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_Z");
	lua_pushnumber(L, 90);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_PAUSE");
	lua_pushnumber(L, 19);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_G");
	lua_pushnumber(L, 71);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_U");
	lua_pushnumber(L, 85);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_P");
	lua_pushnumber(L, 80);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_NUMPAD6");
	lua_pushnumber(L, 102);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_TAB");
	lua_pushnumber(L, 9);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_T");
	lua_pushnumber(L, 84);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_1");
	lua_pushnumber(L, 49);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_BACK");
	lua_pushnumber(L, 8);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_INSERT");
	lua_pushnumber(L, 45);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_RWIN");
	lua_pushnumber(L, 92);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_RMENU");
	lua_pushnumber(L, 165);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_F");
	lua_pushnumber(L, 70);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_HELP");
	lua_pushnumber(L, 47);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_RCONTROL");
	lua_pushnumber(L, 163);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_RETURN");
	lua_pushnumber(L, 13);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_SNAPSHOT");
	lua_pushnumber(L, 44);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_CANCEL");
	lua_pushnumber(L, 3);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_LEFT");
	lua_pushnumber(L, 37);
	lua_settable(L, -3);
	lua_pushstring(L, "VK_MULTIPLY");
	lua_pushnumber(L, 106);
	lua_settable(L, -3);
	return;
}

int LuaFunctions::cLuaFunctions::lIsKeyDown(lua_State* L)
{
	luaL_checktype(L, 1, LUA_TNUMBER);
	int keyCode = lua_tonumber(L, -1);
	if (keyCode && !Menu::drawMenu)
	{
		bool isKeyDown = (GetKeyState(keyCode) & 0x100) ? true : false;
		lua_pushboolean(L, isKeyDown);
		return 1;
	}
	else
		return 0;
}